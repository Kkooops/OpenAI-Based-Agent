# OpenAI-Based Agent - AI ç¼–ç åŠ©æ‰‹

[![Python 3.12+](https://img.shields.io/badge/python-3.12+-blue.svg)](https://www.python.org)
[![OpenAI Agents SDK](https://img.shields.io/badge/OpenAI_Agents_SDK-0.6.3-green.svg)](https://github.com/openai/openai-agents-python)

ä¸€ä¸ªåŸºäºŽ **OpenAI Agents SDK** æž„å»ºçš„æ™ºèƒ½ç¼–ç åŠ©æ‰‹ï¼Œæä¾›äº¤äº’å¼ CLI ç•Œé¢ï¼Œèƒ½å¤Ÿæ‰§è¡Œæ–‡ä»¶æ“ä½œã€ä»£ç æœç´¢å’Œç³»ç»Ÿå‘½ä»¤ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ðŸ› ï¸ å…¨èƒ½æ–‡ä»¶æ“ä½œ**: æ”¯æŒè¯»å–ã€å†™å…¥ã€ç¼–è¾‘æ–‡ä»¶
- **ðŸ” æ™ºèƒ½ä»£ç æœç´¢**: æ”¯æŒ grep æœç´¢å’Œ glob æ–‡ä»¶åŒ¹é…
- **ðŸ’» å®‰å…¨å‘½ä»¤æ‰§è¡Œ**: åœ¨æ²™ç›’çŽ¯å¢ƒä¸­æ‰§è¡Œ shell å‘½ä»¤
- **ðŸ§  æŽ¨ç†æ€è€ƒ**: æä¾›æ€è€ƒå·¥å…·ç”¨äºŽå¤æ‚ä»»åŠ¡åˆ†æž
- **ðŸ’¬ äº¤äº’å¼å¯¹è¯**: æ”¯æŒå¤šè½®å¯¹è¯ï¼Œä¿æŒä¸Šä¸‹æ–‡
- **ðŸŽ¨ å½©è‰²ç»ˆç«¯**: å‹å¥½çš„ç»ˆç«¯ UIï¼Œå¸¦é¢œè‰²æ ‡è¯†

## ðŸ“‹ å·¥å…·é›†

| å·¥å…· | åŠŸèƒ½æè¿° | å®‰å…¨é™åˆ¶ |
|------|----------|----------|
| `bash` | æ‰§è¡Œ shell å‘½ä»¤ | é»˜è®¤åœ¨å½“å‰å·¥ä½œç›®å½•æ‰§è¡Œ |
| `read_file` | è¯»å–æ–‡ä»¶å†…å®¹ | æ”¯æŒæŒ‡å®šè¯»å–èŒƒå›´å’Œç¼–ç  |
| `write_file` | åˆ›å»º/è¦†ç›–å†™å…¥æ–‡ä»¶ | è‡ªåŠ¨åˆ›å»ºç¼ºå¤±çš„ç›®å½• |
| `edit_file` | å¢žé‡ç¼–è¾‘æ–‡ä»¶ | ç²¾ç¡®æ›¿æ¢ï¼Œé¿å…è¦†ç›–ä¸¢å¤± |
| `grep` | æ­£åˆ™æœç´¢æ–‡ä»¶å†…å®¹ | æŽ’é™¤äºŒè¿›åˆ¶æ–‡ä»¶å’Œå¸¸è§ç¼“å­˜ç›®å½• |
| `glob` | æŒ‰æ¨¡å¼æŸ¥æ‰¾æ–‡ä»¶ | æ”¯æŒé€’å½’æœç´¢å’Œé€šé…ç¬¦ |
| `think` | è®°å½•å†…éƒ¨æŽ¨ç† | æ— å‰¯ä½œç”¨ï¼Œä»…ç”¨äºŽè°ƒè¯• |

## ðŸš€ å¿«é€Ÿå¼€å§‹

### çŽ¯å¢ƒè¦æ±‚

- Python 3.12+
- OpenAI API Key æˆ– Azure OpenAI é…ç½®

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ uv (æŽ¨è)
uv sync

# æˆ–ä½¿ç”¨ pip
pip install -e .
```

### é…ç½® API

**æ–¹å¼ä¸€ï¼šçŽ¯å¢ƒå˜é‡ (æŽ¨è)**

```bash
# å¯¹äºŽæ ‡å‡† OpenAI
export OPENAI_BASE_URL="https://api.openai.com/v1/"
export OPENAI_API_KEY="your-api-key-here"

# æˆ–è€…å¯¹äºŽ Azure OpenAI
export OPENAI_BASE_URL="https://your-resource.openai.azure.com/openai/v1/"
export OPENAI_API_KEY="your-azure-key"

# è¿½è¸ªå¯†é’¥ï¼ˆå¦‚æœ‰éœ€è¦ï¼‰
export OPENAI_API_KEY="your-api-key"  # ç”¨äºŽä¸» API
```

**æ–¹å¼äºŒï¼šä¿®æ”¹ä»£ç **

åœ¨ `src/cli.py` ä¸­æ‰¾åˆ°ä»¥ä¸‹ä»£ç å¹¶ä¿®æ”¹ï¼š

```python
openaiClient = AsyncOpenAI(
    base_url=os.environ["KK_OPENAI_BASE_URL"],  # ä¿®æ”¹ä¸ºä½ çš„é…ç½®
    api_key=os.environ["KK_OPENAI_API_KEY"],
)
```

### åˆ›å»ºç³»ç»Ÿæç¤ºè¯

åˆ›å»º `src/system_prompt.md` æ–‡ä»¶ï¼ˆ**å¿…å¡«**ï¼Œä¸ä¼šæäº¤åˆ° Gitï¼‰ï¼š

```bash
# ä½¿ç”¨æ¨¡æ¿åˆ›å»º
cat > src/system_prompt.md << 'EOF'
ä½ æ˜¯ä¸€ä¸ªåœ¨ CLI çŽ¯å¢ƒä¸­è¿è¡Œçš„ AI ç¼–ç åŠ©æ‰‹ã€‚

å½“å‰å·¥ä½œç›®å½•: {work_dir}

# æ ¸å¿ƒèƒ½åŠ›
- ä½ å¯ä»¥æ‰§è¡Œ bash å‘½ä»¤æ¥å®Œæˆå„ç§ä»»åŠ¡
- ä½ å¯ä»¥è¯»å–å·¥ä½œç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶
- ä½ å¯ä»¥å†™å…¥å’Œåˆ›å»ºæ–°æ–‡ä»¶
- ä½ å¯ä»¥ç²¾ç¡®ç¼–è¾‘çŽ°æœ‰æ–‡ä»¶å†…å®¹
- ä½ å¯ä»¥æœç´¢æ–‡ä»¶å†…å®¹å’ŒæŸ¥æ‰¾æ–‡ä»¶è·¯å¾„
- ä½ å¯ä»¥è®°å½•æ€è€ƒè¿‡ç¨‹ç”¨äºŽå¤æ‚é—®é¢˜åˆ†æž

# å®‰å…¨å‡†åˆ™
- æ°¸è¿œä¸è¦åœ¨å·¥ä½œç›®å½•ä¹‹å¤–æ“ä½œæ–‡ä»¶
- ç¼–è¾‘æ–‡ä»¶å‰å¿…é¡»å…ˆè¯»å–å†…å®¹
- æ‰§è¡Œå±é™©æ“ä½œå‰è¯·å…ˆç¡®è®¤
- ä¿æŒè¾“å‡ºç®€æ´ä½†ä¿¡æ¯å®Œæ•´

# å·¥ä½œæµç¨‹å»ºè®®
1. å…ˆæ€è€ƒä»»åŠ¡ç›®æ ‡å’Œå®žæ–½æ–¹æ¡ˆ
2. ä½¿ç”¨ grep/glob æŸ¥æ‰¾ç›¸å…³æ–‡ä»¶
3. é˜…è¯»é‡è¦æ–‡ä»¶çš„å†…å®¹
4. æ‰§è¡Œå¿…è¦çš„æ“ä½œï¼ˆç¼–è¾‘/åˆ›å»ºç­‰ï¼‰
5. éªŒè¯ç»“æžœ

EOF
```

## ðŸƒ ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨åŠ©æ‰‹

```bash
python -m src.cli
```

### äº¤äº’å¼ç•Œé¢

å¯åŠ¨åŽä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š

```
âš™ System  å·²è¿›å…¥äº¤äº’æ¨¡å¼
   å·¥ä½œç›®å½•: /path/to/your/project
   æç¤ºï¼šè¾“å…¥é—®é¢˜åŽå›žè½¦ï¼Œä¸Ž ðŸ¤– Assistant å¯¹è¯ï¼›æŒ‰ Ctrl+C é€€å‡ºã€‚

ðŸ‘¤ You âž¤ 
```

### ä½¿ç”¨ç¤ºä¾‹

```
ðŸ‘¤ You âž¤ è¯·å¸®æˆ‘åˆ†æžé¡¹ç›®ç»“æž„
ðŸ¤– Assistant æ­£åœ¨æ€è€ƒï¼Œè¯·ç¨å€™...

ðŸ¤– Assistant:
------------------------------------------------------------
è®©æˆ‘å¸®æ‚¨åˆ†æžé¡¹ç›®ç»“æž„...
[åŠ©æ‰‹ä¼šä½¿ç”¨ bash å’Œ glob å·¥å…·æ‰§è¡Œä»»åŠ¡]
------------------------------------------------------------

ðŸ‘¤ You âž¤ è¯·åœ¨ src/ ç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰ Python æ–‡ä»¶
ðŸ¤– Assistant æ­£åœ¨æ€è€ƒï¼Œè¯·ç¨å€™...

ðŸ¤– Assistant:
------------------------------------------------------------
æ‰¾åˆ°äº†ä»¥ä¸‹ Python æ–‡ä»¶:
- src/cli.py
- src/tools/bash_tool.py
- src/tools/read_file_tool.py
...
------------------------------------------------------------
```

### å…¸åž‹ä»»åŠ¡ç¤ºä¾‹

1. **ä»£ç åˆ†æž**
   ```
   è¯·åˆ†æžä¸€ä¸‹ src/cli.py çš„ä¸»è¦åŠŸèƒ½
   ```

2. **æ‰¹é‡ç¼–è¾‘**
   ```
   è¯·ç»™æ‰€æœ‰ Python æ–‡ä»¶æ·»åŠ  copyright å¤´éƒ¨
   ```

3. **è°ƒè¯•è¾…åŠ©**
   ```
   è¿è¡Œ pytest å¹¶åˆ†æžé”™è¯¯ä¿¡æ¯
   ```

4. **æœç´¢æ›¿æ¢**
   ```
   æ‰¾åˆ°æ‰€æœ‰ä½¿ç”¨ os.environ çš„åœ°æ–¹ï¼Œå¹¶æ”¹ä¸ºä½¿ç”¨ dotenv
   ```

## âš™ï¸ é…ç½®è¯´æ˜Ž

### å…³é”®çŽ¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜Ž | æ˜¯å¦å¿…å¡« |
|--------|------|----------|
| `KK_OPENAI_BASE_URL` | OpenAI API åœ°å€ | âœ… |
| `KK_OPENAI_API_KEY` | API Key | âœ… |
| `KK_OPENAI_TRACE_KEY` | è¿½è¸ªå¯†é’¥ | âŒ |

### è‡ªå®šä¹‰é…ç½®

å¦‚æžœä½ éœ€è¦ä¿®æ”¹æ¨¡åž‹æˆ–å…¶ä»–å‚æ•°ï¼Œåœ¨ `src/cli.py` ä¸­ï¼š

```python
agent = Agent(
    name="OAI-Based CodeAgent",
    model="mimo-v2-flash",  # å¯ä»¥ä¿®æ”¹ä¸ºå…¶ä»–æ¨¡åž‹
    instructions=system_prompt,
    tools=[bash, read_file, write_file, edit_file, grep, glob, think]
)
```

## ðŸ”’ å®‰å…¨æœºåˆ¶

1. **å·¥ä½œç›®å½•é™åˆ¶**: æ‰€æœ‰æ“ä½œè¢«é™åˆ¶åœ¨å½“å‰å·¥ä½œç›®å½•å†…
2. **è¯»å–ä¼˜å…ˆ**: ç¼–è¾‘æ–‡ä»¶å‰å¿…é¡»å…ˆè¯»å–ï¼Œé¿å…è¯¯æ“ä½œ
3. **æ–‡ä»¶ç±»åž‹è¿‡æ»¤**: æœç´¢æ—¶è‡ªåŠ¨æŽ’é™¤äºŒè¿›åˆ¶æ–‡ä»¶å’Œç¼“å­˜ç›®å½•
4. **ç²¾ç¡®ç¼–è¾‘**: edit_file ä½¿ç”¨å­—ç¬¦ä¸²ç²¾ç¡®åŒ¹é…ï¼Œé¿å…å¤§é¢ç§¯æ„å¤–ä¿®æ”¹
5. **æ‰‹åŠ¨ç¡®è®¤**: æ‰§è¡Œæ½œåœ¨ç ´åæ€§æ“ä½œæ—¶ä¼šç­‰å¾…ç¡®è®¤

## ðŸ› å¸¸è§é—®é¢˜

**Q: å¯åŠ¨æ—¶æŠ¥ `FileNotFoundError: src/system_prompt.md`**
- A: è¯·ç¡®ä¿å·²åˆ›å»º `src/system_prompt.md` æ–‡ä»¶ï¼Œå‚è§ä¸Šæ–¹çš„åˆ›å»ºæ­¥éª¤ã€‚

**Q: çŽ¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ**
- A: æ£€æŸ¥ `cli.py` ç¬¬26-27è¡Œæ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„çŽ¯å¢ƒå˜é‡åã€‚

**Q: æŸäº›å·¥å…·ä¸å¯ç”¨**
- A: ç¡®è®¤å·²å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š`pip list | grep openai-agents`

## ðŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add amazing feature'`
4. æŽ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
5. æäº¤ Pull Request

## ðŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) åè®®å¼€æºã€‚

---

*åŸºäºŽ OpenAI Agents SDK æž„å»º | Powered by OpenAI Agents SDK*
